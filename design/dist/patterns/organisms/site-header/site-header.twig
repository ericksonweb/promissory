{% extends '@atoms/header.twig' %}

{% if not attributes is defined %}
  {% set attributes = {
    class: ['site-header']
  } %}
{% elseif attributes is defined and not attributes.class is defined %}
  {% set attributes = attributes|merge({
    class: ['site-header']
  }) %}
{% else %}
  {% set attributes = attributes|merge({
    class: ['site-header']|merge(logo.attributes.class)
  }) %}
{% endif %}

{# Logo #}
{% if logo is defined %}
  {% if not logo.attributes is defined %}
    {% set logo = logo|merge({
      attributes: {
        class: ['logo', 'site-header__logo']
      }
    }) %}
  {% elseif logo.attributes is defined and not logo.attributes.class is defined %}
    {% set logo = logo|merge({
      attributes: logo.attributes|merge({
        class: ['logo', 'site-header__logo']
      })
    }) %}
  {% else %}
    {% set logo = logo|merge({
      attributes: logo.attributes|merge({
        class: ['logo', 'site-header__logo']|merge(logo.attributes.class)
      })
    }) %}
  {% endif %}
{% endif %}

{# Menu #}
{% if menu is defined %}
  {% set menu_classes = ['site-header__menu'] %}
  {% if menu.inline %}
    {% set menu_classes = menu_classes|merge(['site-header__menu--inline']) %}
  {% endif %}
  
  {% if not menu.content.attributes is defined %}
    {% set menu = menu|merge({
      content: menu.content|merge({
        attributes: {
          class: menu_classes
        }
      })
    }) %}
  {% elseif menu.content.attributes is defined and not menu.content.attributes.class is defined %}
    {% set menu = menu|merge({
      content: menu.content|merge({
        attributes: menu.content.attributes|merge({
          class: menu_classes
        })
      })
    }) %}
  {% else %}
    {% set menu = menu|merge({
      content: menu.content|merge({
        attributes: menu.content.attributes|merge({
          class: menu_classes|merge(menu.content.attributes.class)
        })
      })
    }) %}
  {% endif %}
  
{% endif %}

{% block content %}
  {% if logo is defined %}
    {{ include ('@atoms/link.twig', {
      content: logo.content,
      attributes: logo.attributes
    }, with_context = false) }}
  {% endif %}
  
  {% if menu is defined %}
    {{ include ('@molecules/menu.twig', {
      name: menu.content.name,
      items: menu.content.items,
      style: menu.content.style,
      attributes: menu.content.attributes
    }, with_context = false) }}
  {% endif %}
  
  {% if addl is defined %}
    {{ include ('@atoms/div.twig', {
      content: addl.content,
      attributes: {
        class: ['site-header__addl']
      }
    }, with_context = false) }}
  {% endif %}
{% endblock content %}
